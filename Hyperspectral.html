<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Hyperspectral - Project Eucalyptus üåø</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="index.html">Project Eucalyptus üåø</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="index.html" class="nav-link">Introduction</a>
                            </li>
                            <li class="nav-item">
                                <a href="Data.html" class="nav-link">Data</a>
                            </li>
                            <li class="nav-item">
                                <a href="Radiative_Transfer.html" class="nav-link">Radiative transfer</a>
                            </li>
                            <li class="nav-item">
                                <a href="Model.html" class="nav-link">Model</a>
                            </li>
                            <li class="nav-item">
                                <a href="Validation.html" class="nav-link">Validation</a>
                            </li>
                            <li class="nav-item">
                                <a href="Postprocessing.html" class="nav-link">Postprocessing</a>
                            </li>
                            <li class="nav-item">
                                <a href="Landsat.html" class="nav-link">Landsat</a>
                            </li>
                            <li class="nav-item">
                                <a href="Hyperspectral.html" class="nav-link active" aria-current="page">Hyperspectral</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="Landsat.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/Orbio-Earth/Project-Eucalyptus" class="nav-link"><i class="fa-brands fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#hyperspectral" class="nav-link">Hyperspectral</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="hyperspectral">Hyperspectral</h1>
<h3 id="what-are-the-key-differences-between-the-training-data-and-model-for-multispectral-data-sentinel-2-and-hyperspectral-data-emit">What are the key differences between the training data and model for multispectral data (Sentinel 2) and hyperspectral data (EMIT)?</h3>
<p>EMIT dataset generation generally followed the same pattern as Sentinel-2 and Landsat 8/9.
EMIT granules were sampled globally for the training split, with the validation split stratified across three oil producing regions:</p>
<ol>
<li>the Permian Basin (operationally relevant),</li>
<li>Colorado (difficult background, analogous to the Marcellus region used for the other satellites), and</li>
<li>North Africa (easy background).</li>
</ol>
<p>More details on regional stratification are given in <a href="Validation.html">Validation</a>.</p>
<p>Some 1,120 granules were used for the training split and 199 for validation.
The granules themselves were tiled into 128√ó128 pixel crops.
Into these we synthetically inserted plumes identified by the EMIT and AVIRIS sensors.
We drew from a set of 2,544 plumes for the training chips and 636 for validation, with plumes reused across their respective splits.
Spatial transformations were applied to the plumes, but in contrast to the datasets of the other satellites there was no modulation of plume concentration.</p>
<p>Another important difference in the EMIT dataset is that no temporal reference imagery is used either for training or inference.
That is described in greater detail in the following section.</p>
<h3 id="which-of-the-spectral-bands-do-you-use">Which of the spectral bands do you use?</h3>
<p>We have opted to use all 285 of EMIT's spectral bands. This is different from the choice made in R≈Ø≈æiƒçka et al. (2025) for a similar model, where they only use 86 bands in the methane-absorbing part of the spectrum. This is informed by our experience with Sentinel 2, where bands outside of the methane-absorbing regions are essential to filter out false positives. Our understanding is that they act as controls ‚Äì if a candidate methane plume has a corresponding morphological signature detectable outside of the methane-absorbing region, then it must be a false positive. However, for hyperspectral data, we have not experimentally validated the hypothesis that providing the additional bands results in better performance.</p>
<h3 id="have-you-tried-training-a-hyperspectral-model-with-reference-scenes">Have you tried training a hyperspectral model with reference scenes?</h3>
<p>For a number of reasons, we have not tried training a hyperspectral model with reference scenes.
EMIT has a fine spectral resolution making it well suited to the problem of methane detection, whereas Sentinel-2 and Landsat 8/9 each have two broad bands covering methane-absorbing spectra.
This suggests that a machine learning approach using a single acquisition is possible for EMIT while historical reference imagery is necessary to draw out the methane signal for the other satellites.
Additionally, EMIT has sparse historical coverage compared to the other satellites, meaning that high quality reference scenes may not be available for a given location or they are likely to be further removed in time.
Finally, poor reference scenes can frustrate inference; the presence of unmasked clouds or an emissions event in reference imagery can cause incorrect predictions, particularly false negatives.
Given this, we decided to approach the methane detection problem using a single scene (monotemporal imagery) in the case of EMIT rather than try to leverage reference imagery</p>
<h3 id="results-and-limitations">Results and limitations</h3>
<p>The EMIT CV model achieved the following scores on the validation set:</p>
<ul>
<li>F1 score: 0.720</li>
<li>Recall: 0.584</li>
<li>Precision: 0.938</li>
<li>Mean squared error: 0.099</li>
</ul>
<p>Given that the validation set had been created by synthetically inserting plumes, we put particular weight on qualitatively evaluating an additional set of 61 known emissions identified by IMEO in their original granules, <em>i.e.</em> without having been synthetically inserted.
As a comparison baseline we used the matched filter (MF) algorithm implementation <a href="https://github.com/markusfoote/mag1c">mag1c</a> by Foote <em>et al</em>.
The EMIT CV model successfully detected the vast majority of these emissions events.
False negatives generally correlated with at least one of the following criteria: difficult image background, low methane concentrations, or, particularly, spatially small or sparse methane-containing pixels.
An example of a true positive and a false negative are shown below.</p>
<p><img alt="True positive detection" src="images/image5.png" />
<em>Figure: Example of a true positive detection by the EMIT CV model.</em></p>
<p><img alt="False negative detection" src="images/image10.png" />
<em>Figure: Example of a false negative detection by the EMIT CV model.</em></p>
<p>The finding that the model misses a number of small or sparse plumes suggests that changes to the <a href="Model.html#what-is-the-loss-function-used-for-training">loss function</a> could allow for an improved model.
The mean squared error portion of the model is relatively insensitive to errors of a few pixels.
For larger plumes this makes sense: missing only a few pixels would often be considered good enough.
However, entirely missing a small plume of a few pixels is more problematic from an operational perspective given that recall is of utmost importance, especially given that at the EMIT resolution of 60 meters, small plumes will be a regular occurrence.
Tweaking the loss function to account for this could be promising but has not yet been tested.</p>
<h3 id="does-the-emit-cv-model-outperform-the-matched-filter">Does the EMIT CV model outperform the matched filter?</h3>
<p>It would be difficult to assert that one method is outright better than the other.
From the evaluation of IMEO notified plumes, the matched filter does identify methane in a number of cases where the EMIT CV model either predicts with very low confidence or misses the methane altogether.
As discussed above, these are generally cases of very small or sparse plumes.</p>
<p>The matched filter results contain considerable noise, which we have frequently found to frustrate the automatic segmentation of plumes.
The EMIT CV model produces results with a much higher signal-to-noise ratio, making them easier to segment automatically.</p>
<p>Given the advantages of each approach, the matched filter is still better suited to cases where manual review and segmentation are feasible.
This will be over smaller amounts of imagery.
For large-scale processing and automatic plume segmentation, the clean outputs of the EMIT CV model are preferable even if this will result in lower recall.</p>
<h3 id="references">References</h3>
<p>Foote, M. D., <em>et al.</em> "Fast and Accurate Retrieval of Methane Concentration from Imaging Spectrometer Data Using Sparsity Prior" IEEE Transactions on Geoscience and Remote Sensing. 2020.</p>
<p>R≈Ø≈æiƒçka, V√≠t, and Andrew Markham. "HyperspectralViTs: General Hyperspectral Models for On-board Remote Sensing." <em>IEEE Journal of Selected Topics in Applied Earth Observations and Remote Sensing</em> (2025).</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="javascripts/mathjax.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
